# RBS type signature file
# NOTE: Do not include private method definitions in RBS files.
#       Only public interfaces should be documented here.

module Factorix
  module Dependency
    # Resolves MOD dependencies recursively
    class Resolver
      attr_reader logger: Dry::Logger::Dispatcher

      # Resolves dependencies for the given downloads
      def resolve_dependencies: (
        Array[downloadInfo] downloads,
        Pathname download_dir,
        Integer jobs,
        Progress::Presenter presenter
      ) -> Array[downloadInfo]

      type downloadInfo = {
        release: Types::Release,
        output_path: Pathname,
        mod_name: String,
        category: Types::Category,
        version_requirement: Types::MODVersionRequirement?,
        dependencies_resolved: bool,
        source: Symbol
      }

      type dependencyMetadata = {
        dependency: Entry,
        required_by: String
      }
    end
  end
end
